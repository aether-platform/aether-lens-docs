---
title: Local DevLoop の加速
description: 開発サイクルをミリ秒単位で縮める Aether Lens の Local DevLoop 支援機能。
---

# Local DevLoop Acceleration

モダンな開発において、最大のボトルネックは「書き換えてから確認するまでのラグ」です。Aether Lens は、AI 解析と高速なフィードバックループにより、このサイクルを極限まで短縮します。

## Aether Platform Native の実行基盤
Aether Lens は Aether Platform の一部として、強力なクラウド実行環境をネイティブに活用します。

- **LensDaemon**: 監視と実行のライフサイクルを管理するサービス。プラットフォームと同期し、リソースの最適化を図ります。
- **Browserless Orchestrator**: プラットフォーム上のサイドカー環境と連携し、重い描画処理やマルチデバイス検証をクラウド側で並列実行。
- **Smart Debouncing**: 高速な編集でも、プラットフォーム側の負荷を抑えつつ開発者にはスムーズなフィードバックを提供。

1. **Code Edit**: 開発者がファイルを保存。
2. **AI Vibe Check**: AI が変更の「意図」と「リスク」を数秒で判定。
3. **Execution**: 最小限のテスト（Visual / Command）セットを自動実行。
4. **Insight Feed**: 解析結果と実行状況を CLI のサマリパネルに集約。

### 🕒 A Day in the Life with Vibe Coding

Aether Lens がある開発の日常をシミュレーションしてみましょう。

- **09:00**: ボタンのデザインを微調整。Lens が即座に `Mobile`, `Tablet` のスクリーンショットを生成。「パディングが崩れています」という通知。
- **10:30**: 複雑な認証ロジックをリファクタリング。Lens が裏側で `Backend Strategy` を適用し、既存のテストケースを自動抽出して実行。
- **14:00**: 新機能のプルリクエストを作成。Lens が `A2A Context` を通じて PR エージェントに検証結果を共有。

---

## トラブルシューティング

| 事象 | 原因 | 対処法 |
| :--- | :--- | :--- |
| **テストが遅い** | 多くのブラウザインスタンスが起動している | `browser_strategy` を `docker` または `kubernetes` に切り替えてください。 |
| **差分が検知されない** | `.gitignore` に含まれている | `aether-lens.config.json` の `excludes` を確認してください。 |
| **AI の返答が不適切** | コンテキストが不足している | `strategy` を `custom` に設定し、`custom_instruction` を追加してください。 |

---

## クイックスタート

### 1. インストール
`uv` を使用することで、依存関係を高速かつクリーンに解決できます。

```bash
uv pip install -e . --system
```

### 2. 初期設定
プロジェクトに合わせた戦略を対話形式で選択します。

```bash
aether-lens-cli init
```

### 3. LIVE 監視の開始
`watch` モードを起動すると、その瞬間に Local DevLoop が始動します。

```bash
aether-lens-cli . --watch
```

### 4. テストスイートの実行 (One-Shot Execution)

監視モードではなく、特定のタイミングで一度だけ全検証を行いたい場合は、フラグなしで実行します。CI/CD パイプラインや、コミット直前の最終確認に最適です。

```bash
aether-lens-cli .
```

Aether Lens はプロジェクト内の設定ファイル（`package.json`, `pyproject.toml` 等）を解析し、最適なテストランナー（Jest, Vitest, Pytest）を自動的に検出・実行します。

---

## 🔁 Lens Loop (Continuous Verification)

**Lens Loop** は、Aether Lens CLI が提供する高速なフィードバックループであり、その核となるインターフェースは **MCP (Model Context Protocol)** です。開発者が意識することなく、システムの「裏側」で自律的な検証が繰り返されます。

### 仕組み (Background Loop)
1. **Watch & Execute**: ファイルを保存した瞬間、CLI が背後で検証を開始。開発者の作業画面を占有しません。
2. **MCP Context**: 実行結果やスクリーンショット、ログを MCP サーバーへ自動的にストリーミング。
3. **Shadow Collaboration**: AI エージェント（Antigravity 等）が MCP 経由で裏側の状況を常に監視し、問題があればその場で修正案を提案します。

### 設定方法
`aether-lens.config.json` の `dev_loop` セクションで挙動をカスタマイズできます。

```json
{
  "project_name": "my-project",
  "dev_loop": {
    "browser_targets": ["desktop", "mobile"] // 検証対象のデバイス
  }
}
```

> [!TIP]
> **K8s 環境での利用**:
> `browser_strategy: "remote"` を設定すると、ローカルマシンのリソースを消費せず、クラウド上の Aether Platform 基盤を利用してループを回すことが可能です。

> [!NOTE]
> **ワークスペース全体を監視する場合**
> ターゲットディレクトリ（例: `./sample`）を指定することで、特定のマイクロサービスやコンポーネントのみを監視対象にすることも可能です。
